<article>
  <div class="form-group row">
    <div class="col-auto">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="blue" [formControl]="trackByControl">
        <label class="form-check-label" for="blue">Use track by</label>
      </div>
    </div>
  </div>
  <button class="btn btn-primary mb-3" (click)="simulate()">Lets simulate new backend call...</button>
  <ul class="list-group">
    <ng-container *ngIf="trackByControl.value; else noTrackBy">
      <loop-collapse-state *ngFor="let cardNo of numberOfCards; trackBy: trackByIndexFn; first as isFirst; last as isLast; index as i; count as count; odd as odd" [index]="cardNo.orderNo">
        <div class="card my-2">
          <div class="card-body">
            <p>{{i + 1}} of {{count}}</p>
            <p>{{odd ? 'Odd' : 'Even'}} row</p>
            <p *ngIf="isFirst">First element</p>
            <p *ngIf="isLast">Last element</p>
          </div>
        </div>
      </loop-collapse-state>
    </ng-container>
    <ng-template #noTrackBy>
      <loop-collapse-state *ngFor="let cardNo of numberOfCards; first as isFirst; last as isLast; index as i; count as count; odd as odd" [index]="cardNo.orderNo">
        <div class="card my-2">
          <div class="card-body">
            <p>{{i + 1}} of {{count}}</p>
            <p>{{odd ? 'Odd' : 'Even'}} row</p>
            <p *ngIf="isFirst">First element</p>
            <p *ngIf="isLast">Last element</p>
          </div>
        </div>
      </loop-collapse-state>
    </ng-template>
  </ul>
</article>